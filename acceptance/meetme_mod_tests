Tests
*****

I. Définitions
==============

1. U1 = Utilisateur 1
2. U2 = Utilisateur 2
3. A  = Administrateur
4. ami_user = nom d'utilisateur de l'ami entre "[ ]" dans /etc/asterisk/manager.conf
5. ami_secret = mot de passe de l'ami dans /etc/asterisk/manager.conf champ "Secret"
6. usernum = Numéro d'utilisateur d'une meetme
7. adminnum = Numéro d'utilisateur de l'administrateur d'une meetme

II. Séquence
============

Les différentes sections nécessitent de garder l'état de la section précédente.

1. Arrivée de l'administrateur
------------------------------

* Création de la chambre de conférence 300 avec les modes "kxw(60)iM",
  code pin 1234 et code admin 4567
* U1 appelle 300, tape 1234 et donne son nom
-> U1 est en attente musicale
* U2 appelle 300, tape 1234 et donne son nom
-> U2 est en attente musicale
* A appelle 300, tape 4567 et donne son nom
-> A se voit proposer de modérer U1
* A appuie sur 2 pour l'autoriser
-> U1 entre dans la conférence
-> A se voit proposer de modérer U2
* A appuie sur 3 pour avoir une conversation privée avec U2
-> U1 est mis en attente musicale
-> A et U2 peuvent discuter
* A appuie sur 1 pour refuser U2
-> U2 est mis en attente musicale pendant 60 secondes.
-> U1 rejoint la conférence

La conférence se déroule maintenant entre U1 et A.

2. Arrivée d'utilisateurs pendant une conférence débutée
--------------------------------------------------------

* U2 appelle 300, tape 1234 et donne son nom
-> U2 est en attente musicale
-> A entends un bip
* A fait '**'
-> A se voit proposer de modérer U2
* A fait 3 pour avoir une conversation privée avec U2
-> U1 est mis en attente musicale
-> A et U2 peuvent discuter
* A appuie sur 2 pour accepter U2
-> U1 sort de l'attente musicale
-> U2 rejoint la conférence

La conférence se déroule maintenant entre U1, U2 et A.

3. Suspension de la conférence
------------------------------

* A appuie sur '*#'
-> U1 et U2 sont mis en attente musicale
-> A sort de la conférence.
* A appelle 300, tape 4567 et donne son nom
-> A rejoint la conférence
-> U1 et U2 sortent de l'attente musicale

4. Fin de la conférence
-----------------------

* A appuie sur '#'
-> A, U1 et U2 se voient refouler de la conversation.

5. AMI command MeetmeAccept
---------------------------
* A appel la chambre de conférence et entre son mot de passe
* U1 appel la chambre de conférence et entre le pin de la chambre de conférence
* Depuis l'AMI effectuer la commande suivante

Action: MeetmeAccept
Meetme: 300
Usernum: 2
Adminnum: 1
<enter>

-> U1 est accepté dans la conférence

6. AMI command MeetmeKick
-------------------------
* A appel la chanbre de conférence et entre son mot de passe
* U1 appel la chambre de conférence, entre le pin de la conférence
- A authorise U1
* Depuis l'AMI effectuer la commande suivante

Action: MeetmeKick
Meetme: 300
Usernum: 2
Adminnum: 1
<enter>

-> U1 n'est plus dans la conférence

7. AMI command MeetmeTalk
-------------------------

8. AMI command MeetmePause
--------------------------

III. Procédure de loggin sur l'AMI
----------------------------------
- `telnet localhost 5038`

- `Action: Login`
- `Username: <ami_user>`
- `Secret: <ami_secret>`

- Enter, Enter

IV. Récurérer les usernum et adminnum
-------------------------------------
En général le premier utilisateur à téléphoner dans une chambre de conférence se
voit attribuer le usernum 1, le second 2 et ainsi de suite.
